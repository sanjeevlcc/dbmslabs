

==========================================================================
Transaction Processing, Concurrency Control and Recovery Techniques
==========================================================================


SYLLABUS
------------------
        Introduction to Transaction Processing: 
        Transaction and System Concepts,
        Desirable Properties of Transactions: 
        Serializable Schedule: 
        Two-Phase Locking and Timestamp Ordering Concurrency Control Techniques 
        Recovery Concepts, 
        NO- UNDO REDO Recovery Based on Deferred Update,
        Recovery Technique Based on Immediate Update: 
        Shadow Paging:
        Database Backup and Recovery from Catastroplac Failures









==========================================================================
 Introduction to Transaction Processing
==========================================================================


Transaction processing is a fundamental aspect of modern database systems, 
facilitating the reliable and efficient management of data in various 
applications. 

In this context, a transaction refers to a logical unit of work
that consists of one or more database operations, such as reads, writes,
or updates. 

These operations are typically performed as a single, indivisible unit 
to maintain data integrity and consistency.

Transaction processing systems (TPS) are responsible for 
executing and managing transactions in a reliable and efficient manner.







==========================================================================
Concepts of read, write, commit, and rollback in the
context of database transactions
==========================================================================

// Relation os DISK, RAM and CPU
+------------------------+  +------------+  +------------------+
|          CPU           |  |    RAM     |  |    Hard Disk     |
+------------------------+  +------------+  +------------------+


// Initially data is been brought from HD via RAM to CPU
+------------------------+         +------------+        +------------------+
|          CPU           | <====   |    RAM     |  <==== |    Hard Disk     |
+------------------------+         +------------+        +------------------+

// CPU logically process and send back to HD via RAM
+------------------------+         +------------+        +------------------+
|          CPU           | ====>   |    RAM     |  ====> |    Hard Disk     |
+------------------------+         +------------+        +------------------+

// CPU performs (add, sub etc , eg A=A + 10) and send to RAM for temp hold
finally commit saves to HD via RDBMS software.
+------------------------+         +----------------+        +------------------+
|          CPU           | <====>  |    RAM         |  ====> |    Hard Disk     |
|  ALU + - * /           |         |RD/WR/rollback  |        |       Commit     |
+------------------------+         +----------------+        +------------------+




EXAMPLE SCNERIO
---------------------

                -------------------------
                Before transctions
                A = 1500, B= 1200
                --------------------------


        R(A)        "Read(A)" fetches the current value of A. A= 1500 [RAM]
        A=A-300      Deduct rs 300 from account from A                [CPU]
        W(A)        "Write(A)" subtracts 300 from A.        A = 1200  [RAM]
        
        R(B)        "Read(B)" fetches the current value of B. B= 1200 [RAM]
        B=B+300      Add on rs 300 to account B                       [CPU]
        W(B)        "Write(B)" adds 300 to B.                 B= 1500 [RAM]
        
        COMMIT      Changes is been saved in DBMS                     [ Hard Disk ]


                -------------------------
                After transctions
                A = 1200, B= 1300
                --------------------------






Read OPERATION: 
------------------
        In a database transaction, a read operation involves 
        retrieving data from the database without making 
        any changes to it. 
        
        Reads are typically performed to access existing 
        data for processing or display purposes. 
        
        For example, a SELECT query in SQL is a 
        read operation that retrieves data from 
        the database tables.


        EXAMPLE
        ------------
                sita=200, ram=300
                read(sita)
                read(ram)
                commit


        -------------------------
        Before transactions
        Sita = 200, Ram = 300
        --------------------------

      +-----------------------+     +-----------------------+
      |       Read(Sita)      |     |       Read(Ram)       |
      |   Fetch Sita=200      |     |   Fetch Ram=300       |
      +-----------------------+     +-----------------------+
                     |                           |
                     |                           |
      +----------------------------------------------------+
      |                        COMMIT                      |
      |              Apply changes to the database         |
      +----------------------------------------------------

        -------------------------
        After transactions
        No changes made as there are no write operations.
        Sita = 200, Ram = 300
        --------------------------


                "Read(Sita)" fetches the current 
                value of the variable Sita (200).
                
                "Read(Ram)" fetches the current
                value of the variable Ram (300).
                
                The "Commit" statement finalizes 
                the transaction, but since there are 
                no write operations, there are no 
                changes applied to the database.
                
                The values of Sita and Ram remain 
                unchanged after the transaction.




Write OPERATION: 
------------------
        A write operation in a database transaction involves 
        modifying data in the database. 
        
        This modification could be inserting new records, updating 
        existing records, or deleting records from the database tables.
        
        For example, INSERT, UPDATE, and DELETE statements 
        in SQL are write operations that modify data in 
        the database.



        EXAMPLE
        ------------
        sita=200, ram=300
        read(sita)
        sita = sita -50
        read(ram)
        ram=ram + 50
        commit

        -------------------------
        Before transactions
        Sita = 200, Ram = 300
        --------------------------

      +-----------------------+     +-----------------------+
      |       Read(Sita)      |     |       Read(Ram)       |
      |   Fetch Sita=200      |     |   Fetch Ram=300      |
      +-----------------------+     +-----------------------+
                     |                           |
                     |                           |
      +-----------------------+     +-----------------------+
      |  Update Sita=Sita-50  |     |   Update Ram=Ram+50  |
      |   Sita=200-50=150     |     |   Ram=300+50=350     |
      +-----------------------+     +-----------------------+
                     |                           |
                     |                           |
      +----------------------------------------------------+
      |                        COMMIT                      |
      |              Apply changes to the database         |
      +----------------------------------------------------

        -------------------------
        After transactions
        Sita = 150, Ram = 350
        --------------------------

                "Read(Sita)" fetches the current 
                value of the variable Sita (200).
                
                "Read(Ram)" fetches the current 
                value of the variable Ram (300).
                
                The values of Sita and Ram 
                are updated accordingly.
                
                The "Commit" statement finalizes the 
                transaction, and the changes are 
                applied to the database.
                
                The values of Sita and Ram are 
                updated to 150 and 350, respectively, 
                after the transaction.



Rollback OPERATION: 
------------------
        Rolling back a transaction means undoing all the changes 
        made by the transaction and restoring the database to 
        its state before the transaction began. 
        
        This operation is typically used to discard the effects
        of a transaction that encountered an error or did 
        not complete successfully. 
        
        Rolling back ensures that the database remains in 
        a consistent state and that incomplete or erroneous 
        transactions do not leave behind any unintended changes. 
        
        In most database systems, the ROLLBACK statement is
        used to initiate a rollback of a transaction.


                -------------------------
                Before transactions
                Sita = 200, Ram = 300
                --------------------------

      +-----------------------+     +-----------------------+
      |       Read(Sita)      |     |       Read(Ram)       |
      |   Fetch Sita=200      |     |   Fetch Ram=300      |
      +-----------------------+     +-----------------------+
                     |                           |
                     |                           |
      +-----------------------+     +-----------------------+
      |  Update Sita=Sita-50  |     |   Update Ram=Ram+50  |
      |   Sita=200-50=150     |     |   Ram=300+50=350     |
      +-----------------------+     +-----------------------+
                     |                           |
                     |                           |
      +----------------------------------------------------+
      |                       ROLLBACK                     |
      |              Undo changes made to the database    |
      +----------------------------------------------------

                -------------------------
                After transactions
                No changes made as the transaction was rolled back.
                Sita = 200, Ram = 300
                --------------------------
                

                        "Read(Sita)" fetches the current
                        value of the variable Sita (200).
                        
                        "Read(Ram)" fetches the current
                        value of the variable Ram (300).
                        
                        The values of Sita and Ram 
                        are updated accordingly.
                        
                        The "Rollback" statement is executed,
                        undoing the changes made to the database.
                        
                        Since the transaction was rolled back,
                        the values of 
                        Sita and Ram remain unchanged 
                        at 200 and 300, respectively.



Commit OPERATION: 
------------------
        Committing a transaction in a database context means
        making all the changes performed within the transaction
        permanent and visible to other transactions. 
        
        Once a transaction is committed, its effects are durable 
        and cannot be undone. 
        
        Committing ensures that the changes made by the transaction 
        are preserved even in the event of system failures. 
        
        In many database systems, the COMMIT statement is used to
        finalize and commit a transaction.



           +-----------+   +-----------+   +-----------+
           |   Read A  |   |   Read B  |   |   Read B  |
           +-----------+   +-----------+   +-----------+
           |   A=1500  |   |   B=1200  |   |   B=1200  |
           +-----------+   +-----------+   +-----------+
                    |             |             |
                    |             |             |
           +----------------+  +----------------+   
           |   Write A      |  |   Write B      |  
           |   (A=A-300)    |  |   (B=B+300)    |  
           +----------------+  +----------------+   
           |   A=1200       |  |   B=1500       |
           +----------------+  +----------------+   
                              |
                              |
                       +--------------+
                       |   Commit     |
                       +--------------+



==========================================================================
Transaction and System Concepts
==========================================================================


ACID
------

      Atomicity:
      ---------------
          Transactions should exhibit the atomicity property, meaning 
          that either all the operations within a transaction are 
          executed successfully, or none of them are. 
          
          In other words, transactions are indivisible and 
          should be treated as all or nothing.
      
      Consistency:
      ---------------
          Transactions should leave the database in a consistent 
          state, adhering to all integrity constraints and business rules. 
          Consistency ensures that the database transitions from one
          valid state to another valid state after each transaction.
      
      Isolation: 
      ---------------
          Each transaction should be isolated from other transactions
          executing concurrently. 
          
          Isolation ensures that the intermediate states of transactions
          are not visible to other transactions until they are committed. 
          This prevents interference and maintains data integrity.
      
      Durability: 
      ---------------
          Once a transaction is committed, its effects should be 
          permanently stored in the database and should not be lost, 
          even in the event of system failures. 
          
          Durability guarantees that committed transactions survive 
          system crashes or other failures.







    +------------------+            +------------------+
    |      Read A      |            |      Read B      |
    +------------------+            +------------------+
           |   A=1500                  |   B=1200
           |                           |
           |                           |
    +-------------------+           +-------------------+
    |    Write A (A-300)|           |   Write B (B+300)|
    +-------------------+           +-------------------+
           |   A=1200                  |   B=1500
           |                           |
           |                           |
           +---------------------------+
                         |
                         |
                  +-----------------------+
                  |   Commit/ROLLBACK     |
                  +-----------------------+

        In this example:
        --------------
                "Read A" reads the current value of A (1500).
                "Read B" reads the current value of B (1200).
                "Write A" subtracts 300 from A (A=1200).
                "Write B" adds 300 to B (B=1500).
                Finally, the "Commit" operation makes the changes permanent.



==========================================================================
Desirable Properties of Transactions
==========================================================================



Desirable Properties of Transactions:
---------------------------------------------



ACID Properties: 
---------------
    The desirable properties of transactions are often 
    summarized using the acronym ACID:
    
    Atomicity: 
        Transactions are all-or-nothing operations.
    Consistency: 
        Transactions preserve the consistency of the database.
    Isolation: 
        Transactions execute independently of each other and do not interfere.
    Durability: 
        Committed transactions persist even in the face of system failures.




Concurrency Control:
------------------------------
    Effective concurrency control mechanisms are essential for
    managing concurrent execution of transactions while preserving
    consistency and isolation. 
    
    Techniques such as locking, timestamp ordering, and multi-version 
    concurrency control are commonly employed to ensure correct interleaving
    of transactions.



Recovery Management: 
------------------------------
    Robust recovery mechanisms are necessary to restore the database to
    a consistent state after system failures. 
    
    This involves techniques such as logging changes to the database,
    maintaining a write-ahead log, and performing recovery procedures 
    such as rollbacks or roll-forwards.



High Availability: 
------------------------------
    Transaction processing systems should aim to achieve high 
    availability to ensure continuous access to data and
    uninterrupted operation, even in the face of hardware 
    failures, network issues, or other disruptions. 
    
    Redundancy, failover mechanisms, and disaster recovery plans 
    contribute to achieving high availability.



Scalability: 
------------------------------
    Transaction processing systems should be designed to scale 
    efficiently to handle increasing workloads and growing datasets. 
    
    Scalability can be achieved through techniques such as sharding, 
    replication, and vertical or horizontal scaling of hardware resources.














==========================================================================

==========================================================================




==========================================================================

==========================================================================








==========================================================================

==========================================================================


==========================================================================

==========================================================================

 
Serializable Schedule: 
Two-Phase Locking and Timestamp Ordering Concurrency Control Techniques 
Recovery Concepts, 
NO- UNDO REDO Recovery Based on Deferred Update,
Recovery Technique Based on Immediate Update: 
Shadow Paging:
Database Backup and Recovery from Catastroplac Failures


==========================================================================

==========================================================================








==========================================================================

==========================================================================




==========================================================================

==========================================================================








==========================================================================

==========================================================================




==========================================================================

==========================================================================








==========================================================================

==========================================================================




==========================================================================

==========================================================================








==========================================================================

==========================================================================




==========================================================================

==========================================================================








==========================================================================

==========================================================================




==========================================================================

==========================================================================








==========================================================================

==========================================================================




==========================================================================

==========================================================================








==========================================================================

==========================================================================


